(()=>{"use strict";var t={373:(t,e,i)=>{i.r(e)},408:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Footer=void 0,e.Footer=class{getHtml(){return"\n      <div class='footer-container container'>\n        <div class='logo-rss'><a href=\"https://rs.school/js/\"><img src='./assets/icons/rs_school_js.svg' alt='rsschool'></a></div>\n        <div class='creators'>\n          <a class='creators-item' href='https://github.com/zem41k'>Mihail</a>\n          <a class='creators-item' href='https://github.com/antipachita'>Vladimir</a>\n          <a class='creators-item' href='https://github.com/MarcusKordunski'>Marcus</a>\n        </div>\n        <div class=\"project\">2022</div>\n      </div>"}}},199:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Header=void 0,e.Header=class{getHtml(){return"\n    <div class='header__container container'>\n      <div class='burger'>\n        <span class='burger__line line1'></span>\n        <span class='burger__line line2'></span>\n        <span class='burger__line line3'></span>\n      </div>\n      <div class='burger-menu'>\n        <ul class='burger-menu__list'>\n          <li class='burger-menu__item main-page'>Главная</li>\n          <li class='burger-menu__item textbook-page'>Учебник</li>\n          <li class='burger-menu__item sprint-page'>Спринт</li>\n          <li class='burger-menu__item audio-page'>Аудио Вызов</li>\n          <li class='burger-menu__item statistic-page'>Статистика</li>\n        </ul>\n      </div>\n      <div class='header__title'>RS Lang</div>\n      <nav class='header__menu menu'>\n        <ul class='menu__list'>\n          <li class='menu__item main-page'>Главная</li>\n          <li class='menu__item textbook-page'>Учебник</li>\n          <li class='menu__item sprint-page'>Спринт</li>\n          <li class='menu__item audio-page'>Аудио Вызов</li>\n          <li class='menu__item statistic-page'>Статистика</li>\n        </ul>\n      </nav>\n      <div class=\"header__user-name\"></div>\n      <button class='header__auth-btn'>Войти</button>\n    </div>"}}},316:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AudiocallPage=void 0;const r=i(823);e.AudiocallPage=class{createPage(){(new r.StartPage).createNavVersion()}createBookGame(){(new r.StartPage).createBookVersion()}}},823:function(t,e,i){var r=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))((function(o,s){function n(t){try{d(r.next(t))}catch(t){s(t)}}function a(t){try{d(r.throw(t))}catch(t){s(t)}}function d(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(n,a)}d((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.StartPage=void 0;const o=i(535),s=i(607);e.StartPage=class{constructor(){this.wordNumber=0,this.correctAnswers=0,this.errors=0,this.endPageContent="",this.answerStatuses=[],this.newWords=0,this.learnsWord=0}createNavVersion(){const t=document.querySelectorAll(".audio-page"),e=(t[1],document.querySelector(".main-content")),i=document.querySelector(".burger"),n=document.querySelector(".burger-menu");t.forEach((t=>{t.addEventListener("click",(()=>r(this,void 0,void 0,(function*(){e.innerHTML=this.getHtml(),s.textbook.main.classList.remove("easy");const t=document.querySelectorAll(".levels-list-item");this.lvlListItemslistener(t),s.auth.user&&Date.now()-Number(localStorage.getItem("date"))>864e8&&(yield o.api.updateStatistics(s.auth.user.userId,s.auth.token,{learnedWords:0,optional:{audiocall:{correctWords:0,incorrectWords:0,streak:0,newWords:0},sprint:{correctWords:0,incorrectWords:0,streak:0,newWords:0}}}),localStorage.setItem("date",String(Date.now()))),n.classList.contains("open")&&(i.classList.remove("open"),n.classList.remove("open"))}))))}))}createBookVersion(){return r(this,void 0,void 0,(function*(){this.resetCounters();const t=Number(localStorage.getItem("rs-lang-active-group")),e=Number(localStorage.getItem("rs-lang-active-page"));let i;if(s.auth.user){const n=function(e,a){return r(this,void 0,void 0,(function*(){let r=e,d=`%7B%22$and%22%3A%5B%7B%22group%22%3A${t}%7D%2C%7B%22page%22%3A${e}%7D%5D%7D`;6===t&&(d="%7B%22userWord.difficulty%22%3A%22hard%22%7D"),i=yield o.api.getAggregatedWords(s.auth.user.userId,s.auth.user.token,d);const l=i.filter((t=>{var e;return"easy"!==(null===(e=t.userWord)||void 0===e?void 0:e.difficulty)})),c=a;if(20!==c.length&&0!==e){for(let t=0;t<l.length;t++)c.length<20&&c.push(l[t]);return r-=1,yield n(r,c)}for(let t=0;t<l.length;t++)c.length<20&&c.push(l[t]);i=c}))};yield n(e,[])}else i=yield o.api.getWords(t,e);this.getGamePage();const n=document.querySelector(".scroll-btn");yield this.getNewPage(i,this.wordNumber);const a=document.querySelectorAll(".options-list-item");this.scrollBtnListener(i,a,!0),this.variantsBtnsClickListener(a,i,n),this.variantsBtnsKeyListener(a,i,n)}))}getHtml(){return"\n      <div class='audiocall-content'>\n        <div class='audiocall-menu-box'>\n          <h2 class='audiocall-title'>Аудиовызов</h2>\n          <p class='game-desciption'>Аудивызов - игра на тренировку навыков аудирования. В процессе игры десять попыток угадать слово, произнесенное на английском языке.</p>\n          <ul class='game-rules'>\n            <li class='game-rules-item'>Используйте мышь, чтобы выбрать.</li>\n            <li class='game-rules-item'>Используйте цифровые клавиши от 1 до 5 для выбора ответа.</li>\n            <li class='game-rules-item'>Используйте пробел для повтроного звучания слова.</li>\n            <li class='game-rules-item'>Используйте клавишу Enter для подсказки или для перехода к следующему слову.</li>\n          </ul>\n          <h4 class='audiocall-select-title'>Выберите уровень сложности</h3>\n          <ul class='levels-list'>\n            <li class='levels-list-item'>1</li>\n            <li class='levels-list-item'>2</li>\n            <li class='levels-list-item'>3</li>\n            <li class='levels-list-item'>4</li>\n            <li class='levels-list-item'>5</li>\n            <li class='levels-list-item'>6</li>\n          </ul>\n        </div>\n      </div>\n    "}getGamePage(){document.querySelector(".main-content").innerHTML="\n      <div class='audiocall-gamepage'>\n        <div tabindex=\"0\" class='sound-btn gamepage-item'></div>\n        <ul class='options-list gamepage-item'>\n        <li tabindex=\"0\" class='options-list-item'></li>\n        <li tabindex=\"0\" class='options-list-item'></li>\n        <li tabindex=\"0\" class='options-list-item'></li>\n        <li tabindex=\"0\" class='options-list-item'></li>\n        </ul>\n        <button tabindex=\"0\" class='scroll-btn gamepage-item'>Не знаю</button>\n      </div>\n    "}lvlListItemslistener(t){t.forEach(((t,e)=>{t.addEventListener("click",(()=>r(this,void 0,void 0,(function*(){this.resetCounters(),this.getGamePage();const t=Math.floor(30*Math.random());let i;if(s.auth.user){const r=`%7B%22$and%22%3A%5B%7B%22group%22%3A${e}%7D%2C%7B%22page%22%3A${t}%7D%5D%7D`;i=yield o.api.getAggregatedWords(s.auth.user.userId,s.auth.user.token,r)}else i=yield o.api.getWords(e,t);const r=document.querySelector(".scroll-btn");yield this.getNewPage(i,this.wordNumber);const n=document.querySelectorAll(".options-list-item");this.scrollBtnListener(i,n),this.variantsBtnsClickListener(n,i,r),this.variantsBtnsKeyListener(n,i,r)}))))}))}resetCounters(){this.wordNumber=0,this.correctAnswers=0,this.errors=0,this.answerStatuses=[],this.newWords=0,this.learnsWord=0}scrollBtnListener(t,e,i){const n=document.querySelector(".scroll-btn");null==n||n.addEventListener("mousedown",(a=>r(this,void 0,void 0,(function*(){"Не знаю"===n.textContent&&(this.errors++,this.answerStatuses.push("falsy-answer"),s.auth.user&&(t[this.wordNumber].userWord?yield o.api.updateUserWord(s.auth.user.userId,s.auth.token,t[this.wordNumber]._id,{difficulty:"normal",optional:{correctCount:t[this.wordNumber].userWord.optional.correctCount,totalIncorrectCount:t[this.wordNumber].userWord.optional.totalIncorrectCount+1,totalCorrectCount:t[this.wordNumber].userWord.optional.totalCorrectCount}}):yield o.api.createUserWord(s.auth.user.userId,t[this.wordNumber]._id,s.auth.token,{difficulty:"normal",optional:{correctCount:0,totalIncorrectCount:1,totalCorrectCount:0}}))),this.wordNumber<t.length-1?(this.wordNumber++,this.getNewPage(t,this.wordNumber),this.resetStyles(e),n.textContent="Не знаю"):(this.createEndPage(t,i),s.auth.user&&(yield this.changeStatistics(s.auth.user.userId,s.auth.token,{learnedWords:0,optional:{audiocall:{correctWords:this.correctAnswers,incorrectWords:this.errors,streak:this.getStrick(),newWords:this.newWords},sprint:{correctWords:0,incorrectWords:0,streak:0,newWords:0}}})))})))),document.addEventListener("keypress",(t=>{"Enter"===t.key&&n.focus()})),null==n||n.addEventListener("keyup",(o=>r(this,void 0,void 0,(function*(){"Enter"===o.key&&("Не знаю"===n.textContent?(this.errors++,this.answerStatuses.push("falsy-answer"),this.wordNumber<t.length-1?(this.wordNumber++,this.getNewPage(t,this.wordNumber),this.resetStyles(e),n.textContent="Не знаю"):(this.createEndPage(t,i),s.auth.user&&(yield this.changeStatistics(s.auth.user.userId,s.auth.token,{learnedWords:0,optional:{audiocall:{correctWords:this.correctAnswers,incorrectWords:this.errors,streak:this.getStrick(),newWords:this.newWords},sprint:{correctWords:0,incorrectWords:0,streak:0,newWords:0}}})))):"Next"===n.textContent&&(this.wordNumber<t.length-1?(this.wordNumber++,this.getNewPage(t,this.wordNumber),this.resetStyles(e),n.textContent="Не знаю"):(this.createEndPage(t,i),s.auth.user&&(yield this.changeStatistics(s.auth.user.userId,s.auth.token,{learnedWords:0,optional:{audiocall:{correctWords:this.correctAnswers,incorrectWords:this.errors,streak:this.getStrick(),newWords:this.newWords},sprint:{correctWords:0,incorrectWords:0,streak:0,newWords:0}}})))))}))))}variantsBtnsKeyListener(t,e,i){const o=document.querySelector(".sound-btn");document.addEventListener("keypress",(e=>{" "===e.key?o.focus():"1"===e.key?t[0].focus():"2"===e.key?t[1].focus():"3"===e.key?t[2].focus():"4"===e.key&&t[3].focus()})),o.addEventListener("keyup",(t=>{" "===t.key&&new Audio(`https://rs-lang-learnsword.herokuapp.com/${e[this.wordNumber].audio}`).play()})),t.forEach(((o,n)=>{const a=o;a.addEventListener("keyup",(d=>r(this,void 0,void 0,(function*(){const r=document.querySelectorAll(".options-list-item");let l=!1;r.forEach((t=>{const e=t;(e.classList.contains("correct-answer")||e.classList.contains("wrong-answer"))&&(l=!0)})),!1===l&&d.key===String(n+1)&&(o.textContent===e[this.wordNumber].wordTranslate?(a.classList.add("correct-answer"),this.changeStyle(t,e,this.wordNumber,"del-points-events","all"),this.correctAnswers++,i.textContent="Next",this.answerStatuses.push("true-answer"),s.auth.user&&(yield this.createUserWord(e,1,0,1))):o.textContent!==e[this.wordNumber].wordTranslate&&(a.classList.add("wrong-answer"),this.changeStyle(t,e,this.wordNumber,"correct-answer","one"),this.changeStyle(t,e,this.wordNumber,"del-points-events","all"),this.errors++,i.textContent="Next",this.answerStatuses.push("falsy-answer"),s.auth.user&&(yield this.createUserWord(e,0,1,0))))}))))}))}variantsBtnsClickListener(t,e,i){const o=document.querySelector(".sound-btn");null==o||o.addEventListener("click",(()=>{new Audio(`https://rs-lang-learnsword.herokuapp.com/${e[this.wordNumber].audio}`).play()})),t.forEach(((o,n)=>{o.addEventListener("click",(n=>r(this,void 0,void 0,(function*(){o.textContent===e[this.wordNumber].wordTranslate?(n.target.classList.add("correct-answer"),this.changeStyle(t,e,this.wordNumber,"del-points-events","all"),this.correctAnswers++,i.textContent="Next",this.answerStatuses.push("true-answer"),s.auth.user&&(yield this.createUserWord(e,1,0,1))):o.textContent!==e[this.wordNumber].wordTranslate&&(n.target.classList.add("wrong-answer"),this.changeStyle(t,e,this.wordNumber,"correct-answer","one"),this.changeStyle(t,e,this.wordNumber,"del-points-events","all"),this.errors++,i.textContent="Next",this.answerStatuses.push("falsy-answer"),s.auth.user&&(yield this.createUserWord(e,0,1,0)))}))))}))}getNewPage(t,e){return r(this,void 0,void 0,(function*(){const i=t.slice();if(i.length<4){const t=yield o.api.getWords(1,1);for(let e=0;e<20;e++)i.push(t[e])}const r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19].slice(0,i.length).filter((t=>t!==e)).sort((function(){return Math.random()-.5})).slice(0,3);r.push(e);const s=r.sort((function(){return Math.random()-.5}));new Audio(`https://rs-lang-learnsword.herokuapp.com/${i[e].audio}`).play(),document.querySelectorAll(".options-list-item").forEach(((t,e)=>{t.textContent=i[s[e]].wordTranslate}))}))}changeStyle(t,e,i,r,o){t.forEach((t=>{const s=t;"one"===o?s.textContent===e[i].wordTranslate&&s.classList.add(`${r}`):"all"===o&&s.classList.add(`${r}`)}))}resetStyles(t){t.forEach((t=>{const e=t;e.classList.remove("del-points-events"),e.classList.remove("correct-answer"),e.classList.remove("wrong-answer")}))}getEndPageHtml(t,e){return`\n      <section class='audiocall-results'>\n        <div class='audiocall-container'>\n          <h2 class='results-title'>Ваш результат</h2>\n          <div class='result-percent'>${Math.round(100/(t+e)*t)}%</div>\n          <div class='answers-stats'>\n            <p class='right-answers'>Верных ответов:${t}</p>\n            <p class='errors'>Ошибок:${e}</p>\n          </div>\n          <div class='end-options-menu'>\n            <div class='end-options-menu-item statistics'>Подробнее</div>\n            <div class='end-options-menu-item repeate-game-btn'>Играть снова</div>\n          </div>\n        </div>\n      <section>\n    `}createEndPage(t,e){const i=document.querySelector(".main-content");this.endPageContent=this.getEndPageHtml(this.correctAnswers,this.errors),i.innerHTML=this.endPageContent;const r=document.querySelector(".statistics"),o=document.querySelector(".repeate-game-btn");null==o||o.addEventListener("click",(()=>{if(void 0===e){i.innerHTML=this.getHtml();const t=document.querySelectorAll(".levels-list-item");this.lvlListItemslistener(t)}else!0===e&&this.createBookVersion()})),null==r||r.addEventListener("click",(()=>{i.innerHTML=this.getStatistic(t);const r=document.querySelector(".return-endpage-btn");document.querySelectorAll(".sound-word").forEach(((e,i)=>{e.addEventListener("click",(()=>{new Audio(`http://localhost:3000/${t[i].audio}`).play()}))})),null==r||r.addEventListener("click",(()=>{i.innerHTML=this.endPageContent,this.createEndPage(t,e)}))}))}getStatistic(t){let e="";const i=i=>{e+=`\n      <div class='statistic-answer-item'>\n        <div class='sound-word sound-btn-${i}'></div>\n        <div class='word'>${t[i].word}</div>\n        <div class='word-transc'>${t[i].transcription}</div>\n        <div class='word-translate'>${t[i].wordTranslate}</div>\n        <div class='answer-status answer-status-${i} ${this.answerStatuses[i]}'></div>\n      </div>`};for(let e=0;e<t.length;e++)i(e);return`\n    <section class='statistic-answer'>\n      <div class='statistic-container'>\n        ${e}\n      <div class='return-btn'>\n        <div class='return-endpage-btn'>Назад</div>\n      </div>\n      </div>\n    <section>\n    `}createUserWord(t,e,i,n){return r(this,void 0,void 0,(function*(){if(t[this.wordNumber].userWord){yield o.api.updateUserWord(s.auth.user.userId,s.auth.token,t[this.wordNumber]._id,{difficulty:t[this.wordNumber].difficulty,optional:{correctCount:1===e?t[this.wordNumber].userWord.optional.correctCount+e:0,totalIncorrectCount:t[this.wordNumber].userWord.optional.totalIncorrectCount+i,totalCorrectCount:t[this.wordNumber].userWord.optional.totalCorrectCount+n}});const r=yield o.api.getUserWord(s.auth.user.userId,s.auth.token,t[this.wordNumber]._id);r.optional.correctCount>2&&"normal"===r.difficulty||r.optional.correctCount>4&&"hard"===r.difficulty?(yield o.api.updateUserWord(s.auth.user.userId,s.auth.token,t[this.wordNumber]._id,{difficulty:"easy",optional:{correctCount:r.optional.correctCount,totalIncorrectCount:r.optional.totalIncorrectCount,totalCorrectCount:r.optional.totalCorrectCount}}),this.learnsWord++):0===r.optional.correctCount&&"easy"===r.difficulty&&(yield o.api.updateUserWord(s.auth.user.userId,s.auth.token,t[this.wordNumber]._id,{difficulty:"normal",optional:{correctCount:r.optional.correctCount,totalIncorrectCount:r.optional.totalIncorrectCount,totalCorrectCount:r.optional.totalCorrectCount}}))}else yield o.api.createUserWord(s.auth.user.userId,t[this.wordNumber]._id,s.auth.token,{difficulty:"normal",optional:{correctCount:e,totalIncorrectCount:i,totalCorrectCount:n}}),this.newWords++}))}changeStatistics(t,e,i){return r(this,void 0,void 0,(function*(){const r=yield o.api.getStatistics(t,e);null===r?(yield o.api.updateStatistics(t,e,i),yield o.api.getStatistics(t,e)):(yield o.api.updateStatistics(t,e,{learnedWords:r.learnedWords+this.learnsWord,optional:{audiocall:{correctWords:r.optional.audiocall.correctWords+this.correctAnswers,incorrectWords:r.optional.audiocall.incorrectWords+this.errors,streak:r.optional.audiocall.streak>this.getStrick()?r.optional.audiocall.streak:this.getStrick(),newWords:r.optional.audiocall.newWords+this.newWords},sprint:{correctWords:r.optional.sprint.correctWords,incorrectWords:r.optional.sprint.incorrectWords,streak:r.optional.sprint.streak,newWords:r.optional.sprint.newWords}}}),yield o.api.getStatistics(t,e))}))}getStrick(){const t=this.answerStatuses.slice();let e=0,i=0;for(let r=0;r<t.length;r++)"true-answer"===t[r]?(i++,i>e&&(e=i)):(i>e&&(e=i),i=0);return e}}},607:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.view=e.footer=e.header=e.main=e.textbook=e.auth=void 0,i(373);const r=i(215),o=i(199),s=i(847),n=i(408),a=i(747),d=i(803);e.auth=new a.Auth,e.textbook=new d.Textbook,e.main=new s.Main,e.header=new o.Header,e.footer=new n.Footer,e.view=new r.View(e.header,e.main,e.footer,e.auth,e.textbook),e.view.renderStartPage()},747:function(t,e,i){var r=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))((function(o,s){function n(t){try{d(r.next(t))}catch(t){s(t)}}function a(t){try{d(r.throw(t))}catch(t){s(t)}}function d(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(n,a)}d((r=r.apply(t,e||[])).next())}))},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Auth=void 0;const s=o(i(708)),n=i(535),a=i(607);e.Auth=class{constructor(){const t=localStorage.getItem("rs-lang-userInfo")||null;this.user=JSON.parse(t),this.user&&(this.token=this.user.token),this.date=null===localStorage.getItem("date")?localStorage.setItem("date",String(Date.now())):localStorage.getItem("date")}viewLoginForm(){const t=(0,s.default)("div","login");(0,s.default)("h2","login__title",t).textContent="Авторизация";const e=(0,s.default)("form","login__form",t);(0,s.default)("label",void 0,e,void 0,["for","email"]).textContent="Email:";const i=(0,s.default)("input","login__email",e,void 0,["type","email"],["id","email"]);(0,s.default)("label",void 0,e,void 0,["for","password"]).textContent="Password:";const o=(0,s.default)("input","login__password",e,void 0,["type","password"],["id","password"]),n=(0,s.default)("button","login__login-button",e);n.textContent="Войти";const a=(0,s.default)("a","login__link",e,void 0,["href","#"]);return a.textContent="Страница регистрации",n.addEventListener("click",(t=>r(this,void 0,void 0,(function*(){t.preventDefault();const e={email:i.value,password:o.value};yield this.loginUser(e)})))),a.addEventListener("click",(t=>{t.preventDefault();const e=document.querySelector(".main-content");e.innerHTML="",e.append(this.viewRegForm())})),t}viewRegForm(){const t=(0,s.default)("div","reg");(0,s.default)("h2","reg__title",t).textContent="Регистрация";const e=(0,s.default)("form","reg__form",t);(0,s.default)("label",void 0,e,void 0,["for","name"]).textContent="Имя:";const i=(0,s.default)("input","reg__name",e,void 0,["type","text"],["id","name"]);(0,s.default)("label",void 0,e,void 0,["for","email"]).textContent="Email:";const o=(0,s.default)("input","reg__email",e,void 0,["type","email"],["id","email"]);(0,s.default)("label",void 0,e,void 0,["for","password"]).textContent="Password:";const n=(0,s.default)("input","reg__password",e,void 0,["type","password"],["id","password"]),a=(0,s.default)("button","reg__reg-button",e);a.textContent="Зарегистрироваться";const d=(0,s.default)("a","reg__link",e,void 0,["href","#"]);return d.textContent="Страница авторизации",a.addEventListener("click",(t=>r(this,void 0,void 0,(function*(){t.preventDefault();const e={email:o.value,password:n.value,name:i.value};yield this.regUser(e),o.value,n.value,i.value=""})))),d.addEventListener("click",(t=>{t.preventDefault();const e=document.querySelector(".main-content");e.innerHTML="",e.append(this.viewLoginForm())})),t}regUser(t){return r(this,void 0,void 0,(function*(){try{yield n.api.createUser(t);const e=document.querySelector(".main-content");e.innerHTML="",e.append(this.viewLoginForm()),this.showStatusMessage("Поздравляем! Вы успешно зарегистрировались.","green")}catch(t){this.showStatusMessage("Пожалуйста, введите корректный e-mail или пароль")}}))}loginUser(t){return r(this,void 0,void 0,(function*(){try{const e=yield n.api.loginUser(t),{name:i}=yield n.api.getUser(e.userId,e.token);this.user=e,this.token=e.token,localStorage.setItem("rs-lang-userInfo",JSON.stringify(this.user)),a.view.renderStartPage(),document.querySelector(".header__user-name").textContent=i,document.querySelector(".header__auth-btn").textContent="Выйти"}catch(t){this.showStatusMessage("Неверный логин или пароль")}}))}logoutUser(){this.user=null,this.token="",localStorage.removeItem("rs-lang-userInfo"),localStorage.removeItem("rs-lang-active-page"),localStorage.removeItem("rs-lang-active-group"),a.view.renderStartPage(),document.querySelector(".header__auth-btn").textContent="Войти"}showStatusMessage(t,e){const i=(0,s.default)("div","status-message",document.body);e&&(i.style.backgroundColor=e),i.innerHTML=t,setTimeout((()=>{i.remove()}),2500)}}},847:function(t,e,i){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Main=void 0;const o=r(i(708)),s=r(i(817)),n=r(i(752)),a=i(607);e.Main=class{getHtml(){return"<div class='main-container container'>\n              <div class='main-content'></div>\n            </div>"}init(){const t=(0,o.default)("div","main-page");return t.appendChild(this.getAbout()),t.appendChild(this.getBenefits()),a.auth.user||t.appendChild(this.getRegsLink()),t.appendChild(this.getTeam()),t}getAbout(){const t=(0,o.default)("div","main-page__about about"),e=(0,o.default)("div","about__title-box",t);(0,o.default)("h1","about__title",e).textContent="RS Lang",(0,o.default)("p","about__subtitle",e).innerHTML="Изучай английский вместе с нашим приложением. <br> Теперь это стало легко и увлекательно.";const i=(0,o.default)("button","about__start-btn",e);return i.textContent="Начать",(0,o.default)("img","about__img",t,void 0,["src","./assets/images/main-page.png"],["alt","learn english"]),i.addEventListener("click",(t=>{t.stopPropagation();const e=document.querySelector(".main-content");e.innerHTML="",e.appendChild(a.textbook.init())})),t}getBenefits(){const t=(0,o.default)("div","main-page__benefits benefits");(0,o.default)("h2","benefits__title",t).textContent="Наши преимущества";const e=(0,o.default)("div","benefits__container",t);for(let t=0;t<4;t++){const i=(0,o.default)("div","benefits__item ben-item",e);(0,o.default)("h3","ben-item__title",i).textContent=`${s.default[t].title}`,(0,o.default)("img","ben-item__icon",i,void 0,["src",`${s.default[t].icon}`],["alt","icon"]),(0,o.default)("p","ben-item__text",i).innerHTML=`${s.default[t].text}`}return t}getRegsLink(){const t=(0,o.default)("div","main-page__reglink reglink"),e=(0,o.default)("div","reglink__img-box",t),i=((0,o.default)("img","reglink__image",e,void 0,["src","./assets/images/english.png"],["alt","english"]),(0,o.default)("div","reglink__body",t));(0,o.default)("h2","reglink__title",i).textContent="Зарегистрируйся",(0,o.default)("p","reglink__description",i).textContent="Не забудь зарегистрироваться. Это позволит тебе получить доступ к полному функционалу нашего приложения. А именно: возможность отмечать сложные и изученные слова в учебнике, доступ к ежедневной статистике и многое другое.";const r=(0,o.default)("div","reglink__btns-container",i),s=(0,o.default)("button","reglink__reg-btn",r);s.textContent="Регистрация";const n=(0,o.default)("button","reglink__log-btn",r);return n.textContent="Войти",s.addEventListener("click",(t=>{t.stopPropagation();const e=document.querySelector(".main-content");e.innerHTML="",e.append(a.auth.viewRegForm())})),n.addEventListener("click",(t=>{t.stopPropagation();const e=document.querySelector(".main-content");e.innerHTML="",e.append(a.auth.viewLoginForm())})),t}getTeam(){const t=(0,o.default)("div","main-page__team team");(0,o.default)("h2","team__title",t).textContent="Наша команда";for(let e=0;e<3;e++){const i=(0,o.default)("div","team__item team-item",t),r=(0,o.default)("div","team-item__img-box",i),s=((0,o.default)("img","team-item__photo",r,void 0,["src",`${n.default[e].photo}`],["alt","photo"]),(0,o.default)("div","team-item__body",i));(0,o.default)("h2","team-item__name",s).textContent=`${n.default[e].name}`,(0,o.default)("h3","team-item__subtitle",s).textContent=`${n.default[e].subtitle}`,(0,o.default)("p","team-item__text",s).textContent=`${n.default[e].text}`;const a=(0,o.default)("a","team-item__link",s,void 0,["href",`${n.default[e].ghlink}`]);(0,o.default)("img","team-item__gh-icon",a,void 0,["src","./assets/icons/githublogo.png"],["alt","github"])}return t}}},638:function(t,e,i){var r=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))((function(o,s){function n(t){try{d(r.next(t))}catch(t){s(t)}}function a(t){try{d(r.throw(t))}catch(t){s(t)}}function d(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(n,a)}d((r=r.apply(t,e||[])).next())}))},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Sprint=void 0;const s=o(i(708)),n=i(535),a=i(607);e.Sprint=class{constructor(){this.mainContent=document.querySelector(".main-content"),this.isCorrect=!0,this.correctStreak=0,this.isTimeEnd=!1,this.arrowBlock=!1,this.index=0,this.scoreCount=0,this.scoreAdd=20,this.resCorrectArr=[],this.resUncorrectArr=[],this.learnedWordsStat=0,this.correctWordsStat=0,this.uncorrectWordsStat=0,this.newWordsStat=0,this.maxStreak=0}renderSprintMenu(){this.view="menu";const t=(0,s.default)("div","sprint-menu");(0,s.default)("h2","sprint-menu__title",t).textContent="SPRINT",(0,s.default)("p","sprint-menu__about",t).textContent="«Спринт» - это тренировка для повторения заученных слов из вашего словаря. Выберите сложность и начните упражняться в распознавании слов. \n\n При трёх правильных ответах подряд, количество получаемых очков увеличивается в два раза.";const e=(0,s.default)("ul","sprint-menu__controls",t),i=(0,s.default)("li","sprint-menu__controls__li",e),o=(0,s.default)("li","sprint-menu__controls__li",e);i.textContent="Используйте мышь",o.textContent="Используйте клавиши влево/вправо";const n=(0,s.default)("div","sprint-menu__buttons",t),a=(0,s.default)("select","sprint-menu__difficulty",n);for(let t=0;t<6;t++)(0,s.default)("option",void 0,a,void 0,["value",`${t+1}`]).textContent=`${t+1}`;return this.startButton=(0,s.default)("button","sprint-menu__start",n,void 0,["type","button"]),this.startButton.textContent="Начать",this.startButton.addEventListener("click",(t=>r(this,void 0,void 0,(function*(){t.preventDefault(),this.difficulty=a.value,this.resCorrectArr=[],this.resUncorrectArr=[],this.index=0,this.correctStreak=0,this.scoreCount=0,this.learnedWordsStat=0,this.newWordsStat=0,this.correctWordsStat=0,this.uncorrectWordsStat=0,this.maxStreak=0,this.mainContent.innerHTML="",this.mainContent.appendChild(this.renderSprintGame()),clearInterval(this.timerInterval),yield this.createWordsArr(),this.timerCounter(),this.setNewWord()})))),t}renderSprintGame(){this.view="game";const t=(0,s.default)("div","sprint-game");this.score=(0,s.default)("p","sprint-game__score",t),this.score.textContent=`Score: ${this.scoreCount}`;const e=(0,s.default)("div","sprint-game__streak",t);this.streakSignal1=(0,s.default)("div","streak__signal1",e),this.streakSignal2=(0,s.default)("div","streak__signal2",e),this.streakSignal3=(0,s.default)("div","streak__signal3",e),this.timer=(0,s.default)("p","sprint-game__timer",t),this.timer.textContent="60",this.word=(0,s.default)("p","sprint-game__word",t),this.translation=(0,s.default)("p","sprint-game__translation",t),this.translation.textContent=" ";const i=(0,s.default)("div","sprint-game__buttons",t);return this.correctBtn=(0,s.default)("button","sprint-game__correct-btn",i,void 0,["type","button"]),this.uncorrectBtn=(0,s.default)("button","sprint-game__uncorrect-btn",i,void 0,["type","button"]),this.correctBtn.textContent="Верно",this.uncorrectBtn.textContent="Неверно",this.correctBtn.addEventListener("click",(t=>r(this,void 0,void 0,(function*(){t.preventDefault(),yield this.answerHandler("correct"),this.streakHandler(),this.index+=1,this.setNewWord()})))),this.uncorrectBtn.addEventListener("click",(t=>r(this,void 0,void 0,(function*(){t.preventDefault(),yield this.answerHandler("uncorrect"),this.streakHandler(),this.index+=1,this.setNewWord()})))),t}renderSprintResult(){this.view="res";const t=(0,s.default)("div","sprint-result");(0,s.default)("p","sprint-result__title",t).textContent="Ваш результат:",(0,s.default)("p","sprint-result__correct-title",t).textContent=`ВЕРНО: ${this.resCorrectArr.length}`;const e=(0,s.default)("div","sprint-result__correct-words",t);for(let t=0;t<this.resCorrectArr.length;t++){const i=(0,s.default)("span",void 0,e),o=(0,s.default)("p",void 0,e);(0,s.default)("br",void 0,e),(0,s.default)("br",void 0,e),i.textContent="🎧",o.textContent=`${this.resCorrectArr[t].word} - ${this.resCorrectArr[t].wordTranslate}`,i.addEventListener("click",(()=>r(this,void 0,void 0,(function*(){new Audio(`https://rs-lang-learnsword.herokuapp.com/${this.resCorrectArr[t].audio}`).play()}))))}(0,s.default)("p","sprint-result__uncorrect-title",t).textContent=`ОШИБОК: ${this.resUncorrectArr.length}`;const i=(0,s.default)("div","sprint-result__uncorrect-words",t);for(let t=0;t<this.resUncorrectArr.length;t++){const e=(0,s.default)("span",void 0,i),o=(0,s.default)("p",void 0,i);(0,s.default)("br",void 0,i),(0,s.default)("br",void 0,i),e.textContent="🎧",o.textContent=`${this.resUncorrectArr[t].word} - ${this.resUncorrectArr[t].wordTranslate}`,e.addEventListener("click",(()=>r(this,void 0,void 0,(function*(){new Audio(`https://rs-lang-learnsword.herokuapp.com/${this.resUncorrectArr[t].audio}`).play()}))))}const o=(0,s.default)("div","sprint-result__buttons",t),n=(0,s.default)("button","sprint-result__play-again",o,void 0,["type","button"]),d=(0,s.default)("button","sprint-result__exit",o,void 0,["type","button"]);return n.textContent="Играть еще",d.textContent="Выйти",n.addEventListener("click",(t=>r(this,void 0,void 0,(function*(){t.preventDefault(),this.mainContent.innerHTML="",this.mainContent.appendChild(this.renderSprintMenu())})))),d.addEventListener("click",(t=>r(this,void 0,void 0,(function*(){t.preventDefault(),this.mainContent.innerHTML="",this.mainContent.appendChild(a.main.init())})))),t}timerCounter(){this.isTimeEnd=!1;let t=60;this.timerInterval=setInterval((()=>{t--,this.timer.textContent=`${t}`,0===t&&(clearInterval(this.timerInterval),this.updateSprintStats(),this.isTimeEnd=!0,this.mainContent.innerHTML="",this.mainContent.appendChild(this.renderSprintResult()))}),1e3)}coinThrow(){return Math.random()<.5}randomPage(){return Math.round(29*Math.random()+0)}randomIndex(){return Math.round(19*Math.random()+0)}createWordsArr(t){var e,i,o,s,d,l,c;return r(this,void 0,void 0,(function*(){let r;r=void 0===t?this.randomPage():t;let u=this.randomPage();for(;r===u;)u=this.randomPage();let h=r,p=!0;0!==r&&(h=r-1,p=!1);const v={$and:[{$or:[{"userWord.difficulty":"hard"},{"userWord.difficulty":"normal"},{userWord:null}]},{$and:[{group:Number(this.difficulty)-1},{page:r}]}]},m={$and:[{$or:[{"userWord.difficulty":"hard"},{"userWord.difficulty":"normal"},{userWord:null}]},{$and:[{group:Number(this.difficulty)-1},{page:u}]}]},g={$and:[{$or:[{"userWord.difficulty":"hard"},{"userWord.difficulty":"normal"},{userWord:null}]},{$and:[{group:Number(this.difficulty)-1},{page:h}]}]};if((void 0===t||!(null===(e=a.auth.user)||void 0===e?void 0:e.userId))&&Number(this.difficulty)<7)this.wordsArr=yield n.api.getWordsSprint(this.difficulty,r),this.wordsWrongArr=yield n.api.getWordsSprint(this.difficulty,u);else if(7===Number(this.difficulty)&&(null===(i=a.auth.user)||void 0===i?void 0:i.userId))this.wordsArr=yield n.api.getAggregatedWords(null===(o=a.auth.user)||void 0===o?void 0:o.userId,a.auth.token,JSON.stringify({"userWord.difficulty":"hard"})),this.wordsWrongArr=yield n.api.getWordsSprint("5",u);else if((null===(s=a.auth.user)||void 0===s?void 0:s.userId)&&(this.wordsArr=yield n.api.getAggregatedWords(null===(d=a.auth.user)||void 0===d?void 0:d.userId,a.auth.token,JSON.stringify(v)),this.wordsWrongArr=yield n.api.getAggregatedWords(null===(l=a.auth.user)||void 0===l?void 0:l.userId,a.auth.token,JSON.stringify(m)),!p&&this.wordsArr.length<20)){const t=yield n.api.getAggregatedWords(null===(c=a.auth.user)||void 0===c?void 0:c.userId,a.auth.token,JSON.stringify(g));for(let e=0;e<21-this.wordsArr.length;e++)this.wordsArr.push(t[e]),t[e+1]||(e+=100)}this.wordsArr.forEach((t=>this.coinThrow()?t:t.wordTranslateWrong=this.wordsWrongArr[this.randomIndex()].wordTranslate))}))}setNewWord(){return r(this,void 0,void 0,(function*(){this.index===this.wordsArr.length?(this.updateSprintStats(),this.mainContent.innerHTML="",this.mainContent.appendChild(this.renderSprintResult()),clearInterval(this.timerInterval)):(this.word.textContent=this.wordsArr[this.index].word,this.wordsArr[this.index].wordTranslateWrong?this.translation.textContent=this.wordsArr[this.index].wordTranslateWrong:this.translation.textContent=this.wordsArr[this.index].wordTranslate)}))}blockGameButtons(){this.correctBtn.setAttribute("disabled","disabled"),this.uncorrectBtn.setAttribute("disabled","disabled"),this.arrowBlock=!0}unlockGameButtons(){this.correctBtn.removeAttribute("disabled"),this.uncorrectBtn.removeAttribute("disabled"),this.arrowBlock=!1}answerHandler(t){var e,i,o,s,d,l,c,u,h,p,v,m,g,f,y,w;return r(this,void 0,void 0,(function*(){let r=this.wordsArr[this.index].id;if(void 0===this.wordsArr[this.index].id&&(r=this.wordsArr[this.index]._id),"correct"!==t||this.wordsArr[this.index].wordTranslateWrong){if("uncorrect"===t&&this.wordsArr[this.index].wordTranslateWrong){if(this.scoreCount+=this.scoreAdd,this.score.textContent=`Score: ${this.scoreCount}`,this.correctStreak+=1,this.resCorrectArr.push(this.wordsArr[this.index]),null===(c=a.auth.user)||void 0===c?void 0:c.userId){this.correctWordsStat++,this.blockGameButtons();const t=yield n.api.getUserWord(null===(u=a.auth.user)||void 0===u?void 0:u.userId,a.auth.token,r);"normal"===t.difficulty&&"normal"===t.difficulty&&0===t.optional.correctCount&&0===t.optional.totalIncorrectCount&&0===t.optional.totalCorrectCount?(yield n.api.createUserWord(null===(h=a.auth.user)||void 0===h?void 0:h.userId,r,a.auth.token,{difficulty:"normal",optional:{correctCount:t.optional.correctCount+1,totalCorrectCount:t.optional.totalCorrectCount+1,totalIncorrectCount:t.optional.totalIncorrectCount}}),this.newWordsStat++):2===t.optional.correctCount&&"normal"===t.difficulty?(this.learnedWordsStat++,yield n.api.updateUserWord(null===(p=a.auth.user)||void 0===p?void 0:p.userId,a.auth.token,r,{difficulty:"easy",optional:{correctCount:t.optional.correctCount+1,totalCorrectCount:t.optional.totalCorrectCount+1,totalIncorrectCount:t.optional.totalIncorrectCount}})):4===t.optional.correctCount&&"hard"===t.difficulty?(this.learnedWordsStat++,yield n.api.updateUserWord(null===(v=a.auth.user)||void 0===v?void 0:v.userId,a.auth.token,r,{difficulty:"easy",optional:{correctCount:t.optional.correctCount+1,totalCorrectCount:t.optional.totalCorrectCount+1,totalIncorrectCount:t.optional.totalIncorrectCount}})):yield n.api.updateUserWord(null===(m=a.auth.user)||void 0===m?void 0:m.userId,a.auth.token,r,{difficulty:t.difficulty,optional:{correctCount:t.optional.correctCount+1,totalCorrectCount:t.optional.totalCorrectCount+1,totalIncorrectCount:t.optional.totalIncorrectCount}}),this.unlockGameButtons()}}else if(this.correctStreak=0,this.resUncorrectArr.push(this.wordsArr[this.index]),null===(g=a.auth.user)||void 0===g?void 0:g.userId){this.uncorrectWordsStat++,this.blockGameButtons();const t=yield n.api.getUserWord(null===(f=a.auth.user)||void 0===f?void 0:f.userId,a.auth.token,r);"normal"===t.difficulty&&"normal"===t.difficulty&&0===t.optional.correctCount&&0===t.optional.totalIncorrectCount&&0===t.optional.totalCorrectCount?(yield n.api.createUserWord(null===(y=a.auth.user)||void 0===y?void 0:y.userId,r,a.auth.token,{difficulty:"normal",optional:{correctCount:0,totalCorrectCount:t.optional.totalCorrectCount,totalIncorrectCount:t.optional.totalIncorrectCount+1}}),this.newWordsStat++):yield n.api.updateUserWord(null===(w=a.auth.user)||void 0===w?void 0:w.userId,a.auth.token,r,{difficulty:t.difficulty,optional:{correctCount:0,totalCorrectCount:t.optional.totalCorrectCount,totalIncorrectCount:t.optional.totalIncorrectCount+1}}),this.unlockGameButtons()}}else if(this.scoreCount+=this.scoreAdd,this.score.textContent=`Score: ${this.scoreCount}`,this.correctStreak+=1,this.resCorrectArr.push(this.wordsArr[this.index]),null===(e=a.auth.user)||void 0===e?void 0:e.userId){this.correctWordsStat++,this.blockGameButtons();const t=yield n.api.getUserWord(null===(i=a.auth.user)||void 0===i?void 0:i.userId,a.auth.token,r);"normal"===t.difficulty&&"normal"===t.difficulty&&0===t.optional.correctCount&&0===t.optional.totalIncorrectCount&&0===t.optional.totalCorrectCount?(yield n.api.createUserWord(null===(o=a.auth.user)||void 0===o?void 0:o.userId,r,a.auth.token,{difficulty:"normal",optional:{correctCount:t.optional.correctCount+1,totalCorrectCount:t.optional.totalCorrectCount+1,totalIncorrectCount:t.optional.totalIncorrectCount}}),this.newWordsStat++):2===t.optional.correctCount?(this.learnedWordsStat++,yield n.api.updateUserWord(null===(s=a.auth.user)||void 0===s?void 0:s.userId,a.auth.token,r,{difficulty:"easy",optional:{correctCount:t.optional.correctCount+1,totalCorrectCount:t.optional.totalCorrectCount+1,totalIncorrectCount:t.optional.totalIncorrectCount}})):4===t.optional.correctCount&&"hard"===t.difficulty?(this.learnedWordsStat++,yield n.api.updateUserWord(null===(d=a.auth.user)||void 0===d?void 0:d.userId,a.auth.token,r,{difficulty:"easy",optional:{correctCount:t.optional.correctCount+1,totalCorrectCount:t.optional.totalCorrectCount+1,totalIncorrectCount:t.optional.totalIncorrectCount}})):yield n.api.updateUserWord(null===(l=a.auth.user)||void 0===l?void 0:l.userId,a.auth.token,r,{difficulty:t.difficulty,optional:{correctCount:t.optional.correctCount+1,totalCorrectCount:t.optional.totalCorrectCount+1,totalIncorrectCount:t.optional.totalIncorrectCount}}),this.unlockGameButtons()}}))}streakHandler(){this.createMaxStreak(),this.correctStreak%3==1?(this.streakSignal1.classList.add("active"),this.streakSignal2.classList.remove("active"),this.streakSignal3.classList.remove("active")):this.correctStreak%3==2?this.streakSignal2.classList.add("active"):this.correctStreak%3==0&&this.correctStreak>0?this.streakSignal3.classList.add("active"):0===this.correctStreak&&(this.streakSignal1.classList.remove("active"),this.streakSignal2.classList.remove("active"),this.streakSignal3.classList.remove("active")),this.scoreAdd=20+20*Math.round(this.correctStreak/3)}createMaxStreak(){this.maxStreak<this.correctStreak&&(this.maxStreak=this.correctStreak)}arrowsListener(){document.addEventListener("keydown",(t=>r(this,void 0,void 0,(function*(){"ArrowLeft"===t.code&&"game"===this.view&&!1===t.repeat&&!1===this.arrowBlock?(this.arrowBlock=!0,t.preventDefault(),yield this.answerHandler("correct"),this.streakHandler(),this.index+=1,this.setNewWord()):"ArrowRight"===t.code&&"game"===this.view&&!1===t.repeat&&!1===this.arrowBlock&&(this.arrowBlock=!0,t.preventDefault(),yield this.answerHandler("uncorrect"),this.streakHandler(),this.index+=1,this.setNewWord())}))))}eventListenerTextbook(){document.querySelector(".textbook-games__sprint").addEventListener("click",(()=>r(this,void 0,void 0,(function*(){this.mainContent=document.querySelector(".main-content"),this.difficulty=String(1+Number(localStorage.getItem("rs-lang-active-group"))),this.resCorrectArr=[],this.resUncorrectArr=[],this.index=0,this.correctStreak=0,this.scoreCount=0,this.learnedWordsStat=0,this.newWordsStat=0,this.correctWordsStat=0,this.uncorrectWordsStat=0,this.maxStreak=0,this.mainContent.innerHTML="",yield this.createWordsArr(Number(localStorage.getItem("rs-lang-active-page"))),this.mainContent.appendChild(this.renderSprintGame()),clearInterval(this.timerInterval),this.timerCounter(),this.setNewWord()}))),{once:!0})}updateSprintStats(){var t;return r(this,void 0,void 0,(function*(){if(null===(t=a.auth.user)||void 0===t?void 0:t.userId){const t=yield n.api.getStatistics(a.auth.user.userId,a.auth.token);null===t?yield n.api.updateStatistics(a.auth.user.userId,a.auth.token,{learnedWords:this.learnedWordsStat,optional:{audiocall:{correctWords:0,incorrectWords:0,streak:0,newWords:0},sprint:{correctWords:this.correctWordsStat,incorrectWords:this.uncorrectWordsStat,streak:this.maxStreak,newWords:this.newWordsStat}}}):void 0!==t.learnedWords&&(yield n.api.updateStatistics(a.auth.user.userId,a.auth.token,{learnedWords:t.learnedWords+this.learnedWordsStat,optional:{audiocall:{correctWords:t.optional.audiocall.correctWords,incorrectWords:t.optional.audiocall.incorrectWords,streak:t.optional.audiocall.streak,newWords:t.optional.audiocall.newWords},sprint:{correctWords:t.optional.sprint.correctWords+this.correctWordsStat,incorrectWords:t.optional.sprint.incorrectWords+this.uncorrectWordsStat,streak:t.optional.sprint.streak>this.maxStreak?t.optional.sprint.streak:this.maxStreak,newWords:t.optional.sprint.newWords+this.newWordsStat}}}))}}))}}},955:function(t,e,i){var r=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))((function(o,s){function n(t){try{d(r.next(t))}catch(t){s(t)}}function a(t){try{d(r.throw(t))}catch(t){s(t)}}function d(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(n,a)}d((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Statistic=void 0;const o=i(535),s=i(607);e.Statistic=class{create(){const t=document.querySelectorAll(".statistic-page"),e=(t[1],document.querySelector(".main-content")),i=document.querySelector(".burger"),n=document.querySelector(".burger-menu");t.forEach((t=>{t.addEventListener("click",(()=>r(this,void 0,void 0,(function*(){if(s.auth.user){e.innerHTML=yield this.getAuthHtml(),s.textbook.main.classList.remove("easy");const t=yield o.api.getStatistics(s.auth.user.userId,s.auth.token);null===t?e.innerHTML="\n            <div class='statistics-content'>\n              <div class='statistics-container'> \n                <h2 class='statistics-message'> Ваша статистика отсутствует</h2>\n              </div>\n            </div>\n            ":(Date.now()-Number(localStorage.getItem("date"))>864e8&&(yield o.api.updateStatistics(s.auth.user.userId,s.auth.token,{learnedWords:0,optional:{audiocall:{correctWords:0,incorrectWords:0,streak:0,newWords:0},sprint:{correctWords:0,incorrectWords:0,streak:0,newWords:0}}}),localStorage.setItem("date",String(Date.now()))),yield this.getAudiocallData(t),yield this.getSprintData(t),yield this.getWordstData(t))}else e.innerHTML=yield this.getUnAuth();n.classList.contains("open")&&(i.classList.remove("open"),n.classList.remove("open"))}))))}))}getAuthHtml(){return r(this,void 0,void 0,(function*(){return"\n    <div class='statistics-content'>\n      <div class='statistics-container'>          \n          <div class='words-statistics stat-item'>\n            <h3 class='stat-title'>Статистика по словам</h3>\n            <div class='words-learned words-statistics-item stat-value'> </div>\n            <div class='new-words words-statistics-item stat-value'> </div>\n            <div class='accuracy-words words-statistics-item stat-value'> </div>\n          </div>\n          <div class='audiocall-statistics stat-item'>\n            <h3 class='stat-title'>Статистика по игре \"Аудиовызов\"</h3>\n            <div class='new-words-audiocall audiocall-statistics-item stat-value'> </div>\n            <div class='accuracy-words-audiocall audiocall-statistics-item stat-value'> </div>\n            <div class='combo-words-audiocall audiocall-statistics-item stat-value'> </div>\n          </div>\n          <div class='sprint-statistics stat-item'>\n            <h3 class='stat-title'>Статитстика по игре \"Спринт\"</h3>\n            <div class='new-words-sprint sprint-statistics-item stat-value'> </div>\n            <div class='accuracy-words-sprint sprint-statistics-item stat-value'> </div>\n            <div class='combo-words-sprint sprint-statistics-item stat-value'> </div>\n          </div>\n       \n      </div>\n    </div>\n    "}))}getUnAuth(){return r(this,void 0,void 0,(function*(){return"\n    <div class='statistics-content'>\n      <div class='statistics-container'> \n        <h2 class='statistics-message'> Статистика доступна только для авторизованных пользователей</h2>\n      </div>\n    </div>\n    "}))}getAudiocallData(t){return r(this,void 0,void 0,(function*(){const e=document.querySelector(".new-words-audiocall"),i=document.querySelector(".accuracy-words-audiocall"),r=document.querySelector(".combo-words-audiocall");e.textContent=`Новые слова: ${t.optional.audiocall.newWords}`,i.textContent=`Правильность ответов: ${Math.round(100/(t.optional.audiocall.correctWords+t.optional.audiocall.incorrectWords)*t.optional.audiocall.correctWords||0)}%`,r.textContent=`Максимальное комбо: ${t.optional.audiocall.streak}`}))}getSprintData(t){return r(this,void 0,void 0,(function*(){const e=document.querySelector(".new-words-sprint"),i=document.querySelector(".accuracy-words-sprint"),r=document.querySelector(".combo-words-sprint");e.textContent=`Новые слова: ${t.optional.sprint.newWords}`,i.textContent=`Правильность ответов: ${Math.round(100/(t.optional.sprint.correctWords+t.optional.sprint.incorrectWords)*t.optional.sprint.correctWords||0)}%`,r.textContent=`Максимальное комбо: ${t.optional.sprint.streak}`}))}getWordstData(t){return r(this,void 0,void 0,(function*(){const e=document.querySelector(".words-learned"),i=document.querySelector(".new-words"),r=document.querySelector(".accuracy-words"),o=t.optional.audiocall.correctWords+t.optional.audiocall.incorrectWords+t.optional.sprint.correctWords+t.optional.sprint.incorrectWords,s=t.optional.audiocall.correctWords+t.optional.sprint.correctWords;e.textContent=`Новых слов изучено: ${t.optional.audiocall.newWords+t.optional.sprint.newWords}`,i.textContent=`Правильность ответов: ${Math.round(100/o*s)}%`,r.textContent=`Новых слов выучено: ${t.learnedWords}`}))}}},803:function(t,e,i){var r=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))((function(o,s){function n(t){try{d(r.next(t))}catch(t){s(t)}}function a(t){try{d(r.throw(t))}catch(t){s(t)}}function d(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(n,a)}d((r=r.apply(t,e||[])).next())}))},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Textbook=void 0;const s=o(i(708)),n=i(809),a=i(535),d=i(607),l=i(316);e.Textbook=class{constructor(){this.textbookContainer=(0,s.default)("div","textbook-container"),this.activePage=Number(localStorage.getItem("rs-lang-active-page"))||0,this.activeGroup=Number(localStorage.getItem("rs-lang-active-group"))||0,this.audioPlayer=new Audio}getHtml(){const t=(0,s.default)("div","textbook-games",this.textbookContainer);this.sprintGame=(0,s.default)("button","textbook-games__sprint",t),this.sprintGame.textContent="Спринт",this.audioGame=(0,s.default)("button","textbook-games__audio",t),this.audioGame.addEventListener("click",(()=>{(new l.AudiocallPage).createBookGame()})),this.audioGame.textContent="Аудио вызов",this.paginationDiv=(0,s.default)("div","textbook-pagination",this.textbookContainer);const e=(0,s.default)("div","textbook-body",this.textbookContainer);this.textbook=(0,s.default)("div","textbook",e),this.groupsDiv=(0,s.default)("div","textbook-groups",e)}init(){return this.textbookContainer.innerHTML="",this.getHtml(),this.initGroups(),this.initPagination(),6!==this.activeGroup?this.initWords():this.initHardWords(),this.textbookContainer}initGroups(){(0,s.default)("h2","group-title",this.groupsDiv).textContent="Группы";const t=[];for(let e=0;e<7;e++){const i=(0,s.default)("div","words-group",this.groupsDiv,void 0,["id",`group-${e}`]);(0,s.default)("div","words-group__num",i,void 0,["id",`group-1${e}`]).innerHTML=`${e+1}`,t.push(i)}t[this.activeGroup].classList.add("active"),d.auth.user?t[6].classList.remove("close"):t[6].classList.add("close"),t.forEach(((e,i)=>{e.addEventListener("click",(()=>r(this,void 0,void 0,(function*(){this.activeGroup=i,this.activePage=0,t.forEach((t=>t.classList.remove("active"))),e.classList.add("active"),localStorage.setItem("rs-lang-active-page",`${this.activePage}`),this.activePageDiv.textContent=`${this.activePage+1}`,localStorage.setItem("rs-lang-active-group",`${this.activeGroup}`),6===this.activeGroup?yield this.initHardWords():yield this.initWords()}))))}))}initPagination(){this.prevPageBtn=(0,s.default)("button","textbook-pagination__btn prev-btn",this.paginationDiv),this.prevPageBtn.innerHTML="<",this.activePageDiv=(0,s.default)("div","textbook-pagination__page",this.paginationDiv),this.activePageDiv.textContent=`${this.activePage+1}`,this.nextPageBtn=(0,s.default)("button","textbook-pagination__btn next-btn",this.paginationDiv),this.nextPageBtn.innerHTML=">",this.pageEnterInput=(0,s.default)("input","textbook-pagination__enter",this.paginationDiv,void 0,["type","number"]),this.pageEnterInput.max="30",this.pageEnterInput.min="1";const t=(0,s.default)("button","textbook-pagination__btn enter-btn",this.paginationDiv);t.textContent="Перейти",this.nextPageBtn.addEventListener("click",(()=>{this.activePage+1<30&&(this.activePage+=1,localStorage.setItem("rs-lang-active-page",`${this.activePage}`),this.initWords())})),this.prevPageBtn.addEventListener("click",(()=>{this.activePage-1>=0&&(this.activePage-=1,localStorage.setItem("rs-lang-active-page",`${this.activePage}`),this.initWords())})),t.addEventListener("click",(()=>{this.pageEnterInput.value&&(this.activePage=+this.pageEnterInput.value-1,localStorage.setItem("rs-lang-active-page",`${this.activePage}`),this.pageEnterInput.value="",this.initWords())}))}checkPaginationButtons(){0===this.activePage?(this.prevPageBtn.disabled=!0,this.nextPageBtn.disabled=!1,this.prevPageBtn.classList.add("disabled"),this.nextPageBtn.classList.remove("disabled")):29===this.activePage?(this.nextPageBtn.disabled=!0,this.prevPageBtn.disabled=!1,this.nextPageBtn.classList.add("disabled"),this.prevPageBtn.classList.remove("disabled")):(this.nextPageBtn.disabled=!1,this.prevPageBtn.disabled=!1,this.nextPageBtn.classList.remove("disabled"),this.prevPageBtn.classList.remove("disabled")),this.activePageDiv.textContent=`${this.activePage+1}`}initAudio(){this.wordsOnPage.map((t=>t.wordAudio)).forEach(((t,e)=>{t.addEventListener("click",(()=>{if(this.wordsOnPage[e].isPlayed)this.wordsOnPage[e].audioBtnImg.src="./assets/icons/play.png",this.wordsOnPage[e].isPlayed=!1,this.audioPlayer.pause(),this.audioPlayer.currentTime=0;else{this.wordsOnPage.forEach((t=>t.audioBtnImg.src="./assets/icons/play.png")),this.wordsOnPage[e].audioBtnImg.src="./assets/icons/pause.png",this.wordsOnPage.forEach((t=>t.isPlayed=!1)),this.wordsOnPage[e].isPlayed=!0;let t=0;this.audioPlayer.src=`https://rs-lang-learnsword.herokuapp.com/${this.wordsOnPage[e].audioTracks[t]}`,this.audioPlayer.play(),this.audioPlayer.onended=()=>{t++,t<this.wordsOnPage[e].audioTracks.length?(this.audioPlayer.src=`https://rs-lang-learnsword.herokuapp.com/${this.wordsOnPage[e].audioTracks[t]}`,this.audioPlayer.play()):(this.wordsOnPage[e].audioBtnImg.src="./assets/icons/play.png",this.wordsOnPage[e].isPlayed=!1)}}}))}))}initWords(){return r(this,void 0,void 0,(function*(){if(this.wordsOnPage=[],this.textbook.innerHTML="",this.paginationDiv.style.display="flex",this.main=document.querySelector(".main"),d.auth.user){const t=`%7B%22$and%22%3A%5B%7B%22group%22%3A${this.activeGroup}%7D%2C%7B%22page%22%3A${this.activePage}%7D%5D%7D`;(yield a.api.getAggregatedWords(d.auth.user.userId,d.auth.user.token,t)).forEach((t=>{var e,i;const r=new n.Word(t);this.wordsOnPage.push(r),r.init(),r.deleteFromHardButton.remove(),"hard"===(null===(e=r.userWord)||void 0===e?void 0:e.difficulty)&&r.wordContainer.classList.add("hard"),"easy"===(null===(i=r.userWord)||void 0===i?void 0:i.difficulty)&&r.wordContainer.classList.add("easy"),this.textbook.appendChild(r.wordContainer)}))}else(yield a.api.getWords(this.activeGroup,this.activePage)).forEach((t=>{const e=new n.Word(t);e.init(),this.textbook.appendChild(e.wordContainer),this.wordsOnPage.push(e)}));this.wordsOnPage.every((t=>{var e,i;return"easy"===(null===(e=t.userWord)||void 0===e?void 0:e.difficulty)||"hard"===(null===(i=t.userWord)||void 0===i?void 0:i.difficulty)}))?(this.audioGame.disabled=!0,this.sprintGame.disabled=!0,this.audioGame.classList.add("diss"),this.sprintGame.classList.add("diss"),this.main.classList.add("easy"),this.activePageDiv.classList.add("easy")):(this.audioGame.disabled=!1,this.sprintGame.disabled=!1,this.audioGame.classList.remove("diss"),this.sprintGame.classList.remove("diss"),this.main.classList.remove("easy"),this.activePageDiv.classList.remove("easy")),this.initAudio(),this.checkPaginationButtons()}))}initHardWords(){return r(this,void 0,void 0,(function*(){this.wordsOnPage=[],this.textbook.innerHTML="",this.paginationDiv.style.display="none",(yield a.api.getAggregatedWords(d.auth.user.userId,d.auth.user.token,"%7B%22userWord.difficulty%22%3A%22hard%22%7D",3600)).forEach((t=>{const e=new n.Word(t);this.wordsOnPage.push(e),e.init(),e.difficultyButton.remove(),e.learnedButton.remove(),this.textbook.appendChild(e.wordContainer)})),this.audioGame.disabled=!1,this.sprintGame.disabled=!1,this.audioGame.classList.remove("diss"),this.sprintGame.classList.remove("diss"),this.initAudio()}))}}},809:function(t,e,i){var r=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))((function(o,s){function n(t){try{d(r.next(t))}catch(t){s(t)}}function a(t){try{d(r.throw(t))}catch(t){s(t)}}function d(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(n,a)}d((r=r.apply(t,e||[])).next())}))},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Word=void 0;const s=o(i(708)),n=i(607),a=i(535);e.Word=class{constructor(t){this.id=t._id||t.id,this.group=t.group,this.page=t.page,this.word=t.word,this.image=t.image,this.audio=t.audio,this.audioMeaning=t.audioMeaning,this.audioExample=t.audioExample,this.textMeaning=t.textMeaning,this.textExample=t.textExample,this.textMeaningTranslate=t.textMeaningTranslate,this.textExampleTranslate=t.textExampleTranslate,this.wordTranslate=t.wordTranslate,this.transcription=t.transcription,this.userWord=t.userWord,this.isPlayed=!1}init(){this.getHtml(),n.auth.user&&(this.getUserWordsStatistic(),this.getUserButtons())}getHtml(){this.wordContainer=(0,s.default)("div","textbook__word word-card");const t=(0,s.default)("div","word-card__img-box",this.wordContainer);(0,s.default)("img","word-card__img",t,void 0,["src",`https://rs-lang-learnsword.herokuapp.com/${this.image}`],["alt",`${this.word}`]),this.wordBody=(0,s.default)("div","word-card__body",this.wordContainer);const e=(0,s.default)("div","word-card__top",this.wordBody),i=(0,s.default)("div","word-card__title-box",e);this.wordAudio=(0,s.default)("div","word-card__audio",e),this.audioBtnImg=(0,s.default)("img","word-card__audio-btn",this.wordAudio,void 0,["src","./assets/icons/play.png"],["alt","play"]),this.audioTracks=[this.audio,this.audioMeaning,this.audioExample];const r=(0,s.default)("div","word-card__title-row",i),o=(0,s.default)("div","word-card__title-row",i);(0,s.default)("div","word-card__word",r).textContent=`${this.word}`,(0,s.default)("div","word-card__transcription",r).textContent=`${this.transcription}`,(0,s.default)("div","word-card__translate",o).textContent=`${this.wordTranslate}`;const n=(0,s.default)("div","word-card__mid",this.wordBody);(0,s.default)("div","word-card__meaning",n).innerHTML=`${this.textMeaning}`,(0,s.default)("div","word-card__meaning-translate",n).textContent=`${this.textMeaningTranslate}`,(0,s.default)("div","word-card__bottom",this.wordBody),(0,s.default)("div","word-card__example",n).innerHTML=`${this.textExample}`,(0,s.default)("div","word-card__example-translate",n).textContent=`${this.textExampleTranslate}`}getUserButtons(){const t=(0,s.default)("div","word-card__buttons",this.wordBody);this.learnedButton=(0,s.default)("button","word-card__learned-btn",t),this.learnedButton.textContent="Изучено",this.difficultyButton=(0,s.default)("button","word-card__hard-btn",t),this.difficultyButton.textContent="Сложное",this.deleteFromHardButton=(0,s.default)("button","word-card__delete-btn",t),this.deleteFromHardButton.textContent="Удалить",this.learnedButton.addEventListener("click",(()=>{this.toggleEasyUserWord()})),this.difficultyButton.addEventListener("click",(()=>{this.toggleHardUserWord()})),this.deleteFromHardButton.addEventListener("click",(()=>r(this,void 0,void 0,(function*(){yield this.toggleHardUserWord(),this.wordContainer.style.display="none"}))))}getUserWordsStatistic(){const t=(0,s.default)("div","word-card__tracker",this.wordBody),e=(0,s.default)("div","word-card__correct-div",t),i=(0,s.default)("div","word-card__incorrect-div",t);(0,s.default)("p","word-card__statistic-title",e).textContent="Правильно отгадано: ",(0,s.default)("p","word-card__statistic-title",i).textContent="Неправильно отгадано: ",(0,s.default)("p","word-card__correct-count",e).textContent=this.userWord?`${this.userWord.optional.totalCorrectCount}`:"0",(0,s.default)("p","word-card__incorrect-count",i).textContent=this.userWord?`${this.userWord.optional.totalIncorrectCount}`:"0"}createUserWordOptions(t,e=(this.userWord?this.userWord.optional.correctCount:0),i=(this.userWord?this.userWord.optional.totalCorrectCount:0),r=(this.userWord?this.userWord.optional.totalIncorrectCount:0)){return{difficulty:t,optional:{correctCount:e,totalCorrectCount:i,totalIncorrectCount:r}}}toggleEasyUserWord(){return r(this,void 0,void 0,(function*(){this.userWord?"easy"===this.userWord.difficulty?(yield a.api.updateUserWord(n.auth.user.userId,n.auth.token,this.id,this.createUserWordOptions("normal")),this.userWord=this.createUserWordOptions("normal"),this.wordContainer.classList.remove("easy")):"hard"!==this.userWord.difficulty&&"normal"!==this.userWord.difficulty||(yield a.api.updateUserWord(n.auth.user.userId,n.auth.token,this.id,this.createUserWordOptions("easy")),this.userWord=this.createUserWordOptions("easy"),this.wordContainer.classList.remove("hard"),this.wordContainer.classList.add("easy")):(yield a.api.createUserWord(n.auth.user.userId,this.id,n.auth.token,this.createUserWordOptions("easy")),this.userWord=this.createUserWordOptions("easy"),this.wordContainer.classList.add("easy")),n.textbook.wordsOnPage.every((t=>{var e,i;return"easy"===(null===(e=t.userWord)||void 0===e?void 0:e.difficulty)||"hard"===(null===(i=t.userWord)||void 0===i?void 0:i.difficulty)}))?(n.textbook.audioGame.disabled=!0,n.textbook.sprintGame.disabled=!0,n.textbook.audioGame.classList.add("diss"),n.textbook.sprintGame.classList.add("diss"),n.textbook.main.classList.add("easy"),n.textbook.activePageDiv.classList.add("easy")):(n.textbook.audioGame.disabled=!1,n.textbook.sprintGame.disabled=!1,n.textbook.audioGame.classList.remove("diss"),n.textbook.sprintGame.classList.remove("diss"),n.textbook.main.classList.remove("easy"),n.textbook.activePageDiv.classList.remove("easy"))}))}toggleHardUserWord(){return r(this,void 0,void 0,(function*(){this.userWord?"hard"===this.userWord.difficulty?(yield a.api.updateUserWord(n.auth.user.userId,n.auth.token,this.id,this.createUserWordOptions("normal")),this.userWord=this.createUserWordOptions("normal"),this.wordContainer.classList.remove("hard")):"easy"!==this.userWord.difficulty&&"normal"!==this.userWord.difficulty||(yield a.api.updateUserWord(n.auth.user.userId,n.auth.token,this.id,this.createUserWordOptions("hard")),this.userWord=this.createUserWordOptions("hard"),this.wordContainer.classList.remove("easy"),this.wordContainer.classList.add("hard")):(yield a.api.createUserWord(n.auth.user.userId,this.id,n.auth.token,this.createUserWordOptions("hard")),this.userWord=this.createUserWordOptions("hard"),this.wordContainer.classList.add("hard")),n.textbook.wordsOnPage.every((t=>{var e,i;return"easy"===(null===(e=t.userWord)||void 0===e?void 0:e.difficulty)||"hard"===(null===(i=t.userWord)||void 0===i?void 0:i.difficulty)}))?(n.textbook.audioGame.disabled=!0,n.textbook.sprintGame.disabled=!0,n.textbook.audioGame.classList.add("diss"),n.textbook.sprintGame.classList.add("diss"),n.textbook.main.classList.add("easy"),n.textbook.activePageDiv.classList.add("easy")):(n.textbook.audioGame.disabled=!1,n.textbook.sprintGame.disabled=!1,n.textbook.audioGame.classList.remove("diss"),n.textbook.sprintGame.classList.remove("diss"),n.textbook.main.classList.remove("easy"),n.textbook.activePageDiv.classList.remove("easy"))}))}}},535:function(t,e){var i=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))((function(o,s){function n(t){try{d(r.next(t))}catch(t){s(t)}}function a(t){try{d(r.throw(t))}catch(t){s(t)}}function d(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(n,a)}d((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.api=void 0,e.api=new class{constructor(){this.baseUrl="https://rs-lang-learnsword.herokuapp.com",this.usersUrl=`${this.baseUrl}/users`,this.loginUrl=`${this.baseUrl}/signin`,this.wordsUrl=`${this.baseUrl}/words`}createUser(t){return i(this,void 0,void 0,(function*(){const e=yield fetch(`${this.usersUrl}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});if(e.ok)return yield e.json();throw new Error("error")}))}loginUser(t){return i(this,void 0,void 0,(function*(){const e=yield fetch(`${this.loginUrl}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});return yield e.json()}))}getWordsSprint(t,e){return i(this,void 0,void 0,(function*(){const i=yield fetch(`${this.wordsUrl}?group=${Number(t)-1}&page=${e}`);return yield i.json()}))}getUser(t,e){return i(this,void 0,void 0,(function*(){const i=yield fetch(`${this.usersUrl}/${t}`,{method:"GET",headers:{Authorization:`Bearer ${e}`}});return yield i.json()}))}getWords(t,e){return i(this,void 0,void 0,(function*(){const i=yield fetch(`${this.wordsUrl}?group=${t}&page=${e}`);return yield i.json()}))}createUserWord(t,e,r,o){return i(this,void 0,void 0,(function*(){const i=yield fetch(`${this.usersUrl}/${t}/words/${e}`,{method:"POST",headers:{Authorization:`Bearer ${r}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)});return yield i.json()}))}getUserWords(t,e){return i(this,void 0,void 0,(function*(){const i=yield fetch(`${this.usersUrl}/${t}/words`,{method:"GET",headers:{Authorization:`Bearer ${e}`,Accept:"application/json","Content-Type":"application/json"}});return yield i.json()}))}getUserWord(t,e,r){return i(this,void 0,void 0,(function*(){const i=yield fetch(`${this.usersUrl}/${t}/words/${r}`,{method:"GET",headers:{Authorization:`Bearer ${e}`,Accept:"application/json","Content-Type":"application/json"}});return i.ok?yield i.json():{difficulty:"normal",optional:{correctCount:0,totalCorrectCount:0,totalIncorrectCount:0}}}))}updateUserWord(t,e,r,o){return i(this,void 0,void 0,(function*(){const i=yield fetch(`${this.usersUrl}/${t}/words/${r}`,{method:"PUT",headers:{Authorization:`Bearer ${e}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)});return yield i.json()}))}deleteUserWord(t,e,r){return i(this,void 0,void 0,(function*(){const i=yield fetch(`${this.usersUrl}/${t}/words/${r}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`,Accept:"application/json","Content-Type":"application/json"}});return yield i.json()}))}getAggregatedWords(t,e,r,o=20){return i(this,void 0,void 0,(function*(){const i=yield fetch(`${this.usersUrl}/${t}/aggregatedWords?wordsPerPage=${o}&filter=${r}`,{method:"GET",headers:{Authorization:`Bearer ${e}`,Accept:"application/json","Content-Type":"application/json"}});return(yield i.json())[0].paginatedResults}))}updateStatistics(t,e,r){return i(this,void 0,void 0,(function*(){try{yield fetch(`${this.usersUrl}/${t}/statistics`,{method:"PUT",headers:{Authorization:`Bearer ${e}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)})}catch(t){throw t}}))}getStatistics(t,e){return i(this,void 0,void 0,(function*(){const i=yield fetch(`${this.usersUrl}/${t}/statistics`,{headers:{Authorization:`Bearer ${e}`,Accept:"application/json","Content-Type":"application/json"}});return i.ok?yield i.json():(console.warn("Новая статисктика была создана."),null)}))}}},215:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.View=void 0;const r=i(638),o=i(316),s=i(955);e.View=class{constructor(t,e,i,r,n){this.header=t,this.main=e,this.footer=i,this.auth=r,this.textbook=n,this.audiocall=new o.AudiocallPage,this.statistics=new s.Statistic}renderContainers(){document.body.innerHTML="\n    <div class='root'>\n      <header class='header'></header>\n        <main class='main'>\n          <div class='main-container container'></div>\n        </main>\n      <footer class='footer'></footer>\n    </div>"}renderStartPage(){this.renderContainers(),this.renderHeader(),this.renderMain(),this.renderFooter(),this.addHeaderListeners(),this.renderAudiocall(),this.renderStatisics()}renderHeader(){document.querySelector(".header").innerHTML=this.header.getHtml();const t=document.querySelector(".header__auth-btn"),e=document.querySelector(".header__user-name");this.auth.user?(t.textContent="Выйти",e.textContent=this.auth.user.name):t.textContent="Войти"}renderMain(){document.querySelector(".main").innerHTML=this.main.getHtml(),document.querySelector(".main-content").appendChild(this.main.init())}renderFooter(){document.querySelector(".footer").innerHTML=this.footer.getHtml()}addHeaderListeners(){const t=document.querySelector(".main-content"),e=document.querySelectorAll(".main-page"),i=document.querySelector(".header__auth-btn"),o=new r.Sprint;o.arrowsListener();const s=document.querySelectorAll(".textbook-page"),n=document.querySelectorAll(".sprint-page"),a=document.querySelector(".burger"),d=document.querySelector(".burger-menu");a.addEventListener("click",(()=>{a.classList.toggle("open"),d.classList.toggle("open")})),e.forEach((e=>{e.addEventListener("click",(()=>{clearInterval(o.timerInterval),t.innerHTML="",t.appendChild(this.main.init()),this.textbook.main.classList.remove("easy"),d.classList.contains("open")&&(a.classList.remove("open"),d.classList.remove("open"))}))})),i.addEventListener("click",(()=>{this.auth.user?this.auth.logoutUser():(clearInterval(o.timerInterval),t.innerHTML="",t.append(this.auth.viewLoginForm()))})),s.forEach((e=>{e.addEventListener("click",(()=>{clearInterval(o.timerInterval),t.innerHTML="",t.appendChild(this.textbook.init()),o.eventListenerTextbook(),d.classList.contains("open")&&(a.classList.remove("open"),d.classList.remove("open"))}))})),n.forEach((e=>{e.addEventListener("click",(()=>{clearInterval(o.timerInterval),t.innerHTML="",this.textbook.main.classList.remove("easy"),o.mainContent.appendChild(o.renderSprintMenu()),o.arrowsListener(),d.classList.contains("open")&&(a.classList.remove("open"),d.classList.remove("open"))}))}))}renderAudiocall(){this.audiocall.createPage()}renderStatisics(){this.statistics.create()}}},708:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,r,...o){const s=document.createElement(t);return e&&s.classList.add(...e.split(" ")),i&&i.appendChild(s),r&&Array.isArray(r)?r.forEach((t=>t&&s.appendChild(t))):r&&"object"==typeof r?s.appendChild(r):r&&"string"==typeof r&&(s.innerHTML=r),o.length&&o.forEach((([t,e])=>{t.match(/value|id|placeholder|cols|rows|alt|src|name|for|type|href/)?s.setAttribute(t,e):s.dataset[t]=e})),s}},817:t=>{t.exports=JSON.parse('[{"title":"Электронный учебник","icon":"./assets/icons/book.png","text":"Учебник содержит 3600 часто употребляемых английских слов. Состоит из шести разделов. В каждом разделе 30 страниц по 20 слов. Представлены перевод слова, тематическое изображение, а также произношение как слова отдельно, так и в составе предложения."},{"title":"Спринт","icon":"./assets/icons/gamepad.png","text":"Проверьте, сколько очков вы можете получить за одну минуту, пытаясь определить правильный ли перевод слова."},{"title":"Аудиовызов","icon":"./assets/icons/headphones.png","text":"Проверьте свои навыки аудирования, выберите правильный перевод услышанного слова. Будьте осторожны, так как у вас есть только одна попытка."},{"title":"Статистика","icon":"./assets/icons/bar-chart.png","text":"Весь прогресс обучения можно посмотреть в статистике, где представлены данные как за текущий день, так и за весь период обучения. Информация представлена как в виде таблицы, так и в виде графиков, что очень удобно."}]')},752:t=>{t.exports=JSON.parse('[{"name":"Михаил","photo":"./assets/images/mihail.jpg","subtitle":"Team leader / Frontend developer","text":"Разработал структуру и дизайн проекта. Разработал систему авторизации и учебник слов.","ghlink":"https://github.com/zem41k"},{"name":"Владимир","photo":"./assets/images/vova.png","subtitle":"Frontend developer","text":"Разработал игру Аудиовызов и статистику пользователя. Проводил тестирование проекта и исправление багов.","ghlink":"https://github.com/antipachita"},{"name":"Маркус","photo":"./assets/images/marcus.png","subtitle":"Frontend developer","text":"Разработал игру Спринт, главную страницу и адаптив приложения. Принимал участие в разработке статистики.","ghlink":"https://github.com/MarcusKordunski"}]')}},e={};function i(r){var o=e[r];if(void 0!==o)return o.exports;var s=e[r]={exports:{}};return t[r].call(s.exports,s,s.exports,i),s.exports}i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i(607)})();